<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ORCA Analysis Dashboard</title>
    <style>
        :root {
            --color-primary: #2180a4;
            --color-primary-hover: #1d6d90;
            --color-success: #218040;
            --color-bg: #fcfcf9;
            --color-surface: #fffffe;
            --color-text: #134252;
            --color-text-secondary: #626c71;
            --color-border: rgba(94, 82, 64, 0.2);
        }

        * { box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin: 0;
            padding: 20px;
            background: var(--color-bg);
            color: var(--color-text);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 36px;
            margin: 0 0 10px 0;
            color: var(--color-primary);
        }

        .subtitle {
            font-size: 16px;
            color: var(--color-text-secondary);
            margin: 0;
        }

        .card {
            background: var(--color-surface);
            border-radius: 10px;
            border: 1px solid var(--color-border);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.02);
            padding: 30px;
            margin-bottom: 20px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .feature-card {
            background: var(--color-surface);
            border: 2px solid var(--color-border);
            border-radius: 10px;
            padding: 25px;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            border-color: var(--color-primary);
            box-shadow: 0 4px 12px rgba(33, 128, 164, 0.15);
            transform: translateY(-2px);
        }

        .feature-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .feature-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: 10px;
        }

        .feature-desc {
            font-size: 14px;
            color: var(--color-text-secondary);
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .feature-command {
            background: rgba(33, 128, 164, 0.08);
            padding: 10px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            overflow-x: auto;
            white-space: pre;
            margin-top: 10px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--color-primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--color-primary-hover);
        }

        .btn-success {
            background: var(--color-success);
            color: white;
        }

        .btn-success:hover {
            background: #1d6b35;
        }

        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .gallery-item {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .gallery-item img {
            max-width: 100%;
            height: auto;
            border-radius: 6px;
            margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .gallery-title {
            font-weight: 500;
            color: var(--color-text);
            margin-bottom: 5px;
        }

        .gallery-desc {
            font-size: 12px;
            color: var(--color-text-secondary);
        }

        .stats-banner {
            background: linear-gradient(135deg, #2180a4 0%, #1d6d90 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.9;
        }

        .cta-section {
            text-align: center;
            margin-top: 40px;
            padding: 40px;
            background: rgba(33, 128, 164, 0.05);
            border-radius: 10px;
        }

        .cta-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: 15px;
        }

        .cta-desc {
            font-size: 16px;
            color: var(--color-text-secondary);
            margin-bottom: 25px;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        code {
            background: rgba(33, 128, 164, 0.1);
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }

        a {
            color: var(--color-primary);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üß™ ORCA Analysis Dashboard</h1>
            <p class="subtitle">Complete quantum chemistry workflow: CSV parsing ‚Üí GNN training ‚Üí molecular similarity</p>
        </header>

        <div class="stats-banner">
            <h2 style="margin-top: 0;">Live Analysis Results</h2>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value">85</div>
                    <div class="stat-label">Geometries</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">15,470</div>
                    <div class="stat-label">Atoms</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">72.4</div>
                    <div class="stat-label">Test MAE (Ha)</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">38.08</div>
                    <div class="stat-label">Dipole (D)</div>
                </div>
            </div>
        </div>

        <h2 style="color: var(--color-primary); margin-bottom: 20px;">üöÄ Features</h2>

        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">üìä</div>
                <div class="feature-title">CSV Export</div>
                <div class="feature-desc">
                    Parse ORCA output files into structured CSVs: atomic coordinates, energies, molecular properties, and summary reports.
                </div>
                <div class="feature-command">Open index.html ‚Üí drop .out file</div>
            </div>

            <div class="feature-card">
                <div class="feature-icon">ü§ñ</div>
                <div class="feature-title">Energy Prediction (GNN)</div>
                <div class="feature-desc">
                    Train a Graph Neural Network to predict DFT energies from molecular geometry. Includes MAE/RMSE metrics and convergence plots.
                </div>
                <div class="feature-command">python -m ml.train \
  --coords_csv coords.csv \
  --energies_csv energies.csv \
  --epochs 30 --plots</div>
            </div>

            <div class="feature-card">
                <div class="feature-icon">üéØ</div>
                <div class="feature-title">Multi-Property Prediction</div>
                <div class="feature-desc">
                    Joint training for energy + dipole moment using shared molecular representations. Extends easily to more properties.
                </div>
                <div class="feature-command">python -m ml.train_multitask \
  --properties_csv props.csv \
  --energy_weight 1.0 \
  --dipole_weight 0.01</div>
            </div>

            <div class="feature-card">
                <div class="feature-icon">üîç</div>
                <div class="feature-title">Embedding Extraction</div>
                <div class="feature-desc">
                    Extract 128-dim graph embeddings from trained GNN. Visualize with t-SNE/PCA and compute pairwise similarity matrices.
                </div>
                <div class="feature-command">python -m ml.extract_embeddings \
  --model_path ml/gnn_*.pt \
  --top_k 10</div>
            </div>

            <div class="feature-card">
                <div class="feature-icon">‚öñÔ∏è</div>
                <div class="feature-title">Structure Comparison</div>
                <div class="feature-desc">
                    Compare two ORCA outputs using learned embeddings. Reports cosine similarity, euclidean distance, and property differences.
                </div>
                <div class="feature-command">python -m ml.compare_structures \
  --file1 A.out --file2 B.out</div>
            </div>

            <div class="feature-card">
                <div class="feature-icon">üìà</div>
                <div class="feature-title">Visualization Suite</div>
                <div class="feature-desc">
                    Automated generation of training curves, similarity heatmaps, 2D projections, and property correlations.
                </div>
                <div class="feature-command">All plots saved to ml/logs/ and ml/embeddings/</div>
            </div>
        </div>

        <h2 style="color: var(--color-primary); margin-top: 40px; margin-bottom: 20px;">üì∏ Visualizations</h2>

        <div class="card">
            <div class="gallery">
                <div class="gallery-item">
                    <img src="ml/logs/mae_curve.png" alt="MAE Curve">
                    <div class="gallery-title">Energy MAE Curve</div>
                    <div class="gallery-desc">Training convergence over 10 epochs</div>
                </div>
                <div class="gallery-item">
                    <img src="ml/logs/rmse_curve.png" alt="RMSE Curve">
                    <div class="gallery-title">Energy RMSE Curve</div>
                    <div class="gallery-desc">Root mean squared error progression</div>
                </div>
                <div class="gallery-item">
                    <img src="ml/embeddings/embedding_tsne.png" alt="t-SNE">
                    <div class="gallery-title">t-SNE Projection</div>
                    <div class="gallery-desc">2D molecular embedding space</div>
                </div>
                <div class="gallery-item">
                    <img src="ml/embeddings/embedding_pca.png" alt="PCA">
                    <div class="gallery-title">PCA Projection</div>
                    <div class="gallery-desc">Principal components analysis</div>
                </div>
                <div class="gallery-item">
                    <img src="ml/embeddings/similarity_matrix.png" alt="Similarity">
                    <div class="gallery-title">Similarity Matrix</div>
                    <div class="gallery-desc">Cosine similarity heatmap</div>
                </div>
                <div class="gallery-item">
                    <img src="ml/logs_multitask/energy_mae_curve.png" alt="Multi-task Energy">
                    <div class="gallery-title">Multi-task Energy</div>
                    <div class="gallery-desc">Joint energy prediction</div>
                </div>
                <div class="gallery-item">
                    <img src="ml/logs_multitask/dipole_mae_curve.png" alt="Multi-task Dipole">
                    <div class="gallery-title">Multi-task Dipole</div>
                    <div class="gallery-desc">Joint dipole prediction</div>
                </div>
            </div>
        </div>

        <h2 style="color: var(--color-primary); margin-top: 40px; margin-bottom: 20px;">üì¶ Installation</h2>

        <div class="card">
            <h3>Quick Start</h3>
            <ol>
                <li>Clone repo: <code>git clone https://github.com/Eliotmb/orca-csv.git</code></li>
                <li>Install Python deps: <code>pip install -r requirements-ml.txt</code></li>
                <li>Open <code>index.html</code> in browser to parse ORCA files</li>
                <li>Train GNN: <code>python -m ml.train --coords_csv *.csv --energies_csv *.csv --plots</code></li>
            </ol>

            <h3>Requirements</h3>
            <ul>
                <li>Python 3.10+</li>
                <li>PyTorch 2.2.0+</li>
                <li>PyTorch Geometric 2.6.0+</li>
                <li>pandas, numpy, scikit-learn, matplotlib</li>
            </ul>
        </div>

        <div class="cta-section">
            <div class="cta-title">Ready to analyze your ORCA data?</div>
            <div class="cta-desc">All code and trained models are available on GitHub</div>
            <div class="btn-group">
                <a href="https://github.com/Eliotmb/orca-csv" class="btn btn-primary" target="_blank">
                    View on GitHub
                </a>
                <a href="index.html" class="btn btn-success">
                    Parse ORCA Files
                </a>
            </div>
        </div>

        <footer style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid var(--color-border); color: var(--color-text-secondary); font-size: 14px;">
            <p>Built with PyTorch Geometric ‚Ä¢ Trained on 85 geometries ‚Ä¢ Test MAE: 72.4 Hartree</p>
            <p style="margin-top: 10px;">
                <a href="ml/README.md">ML Docs</a> ‚Ä¢ 
                <a href="https://github.com/Eliotmb/orca-csv/issues">Report Issue</a> ‚Ä¢ 
                <a href="https://github.com/Eliotmb/orca-csv">‚≠ê Star on GitHub</a>
            </p>
        </footer>
    </div>
</body>
</html>
